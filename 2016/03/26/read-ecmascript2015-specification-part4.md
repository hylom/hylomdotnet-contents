---
slug: read-ecmascript2015-specification-part4
title: ECMAScript 2015の仕様書を読む（その4）
tag: [ ecmascript, javascript ]
date: 2016-03-26T21:04:46+09:00
lastmod: 2016-03-26T21:04:46+09:00
publishDate: 2016-03-26T21:04:46+09:00
---

　ECMAScript 2015の仕様書（[ECMA-262](http://www.ecma-international.org/publications/standards/Ecma-262.htm)）を読んでいます。今回は関数とクラスの解説がある第14章。ここではアロー関数やclassキーワード、関数のデフォルト値、可変長引数など多くの新機能が説明されている。

## 第14章


　関数とクラスについて。14.1では、以前よりあったfunctionキーワードを使った関数定義が説明されている。functionキーワードでの関数定義では、新たにRest Parameterという仕組みが導入された。これは、下記のように記述することで、可変長引数をより簡単に扱える仕組み。

```
function 関数名(引数1, 引数2, […,] ...残り引数)
```

　たとえば以下のようにすると、foo関数に与えた3つめ以上の引数は配列restに格納される。

```
function foo(arg1, arg2, ...rest) {}
```

　また、引数では新たにInitializerを使用できる。「引数=値」のように指定することで、その引数がundefinedだった場合、指定した値がセットされる。たとえば次の関数では、2つめの引数がundefinedだった場合、arg2には1が代入される。

```
function foo(arg1, arg2 = 1) {}
```

　14.2ではアロー（「=>」）を使った関数定義（アロー関数）が説明されている。アローを使った関数定義は、簡単にまとめると以下のようになる。

```
() => {関数定義}
(引数1) => {関数定義}
(引数1, 引数2, [...]) => {関数定義}
(引数1, 引数2, [...], ...rest) => {関数定義}
```

　{関数定義}の代わりに戻り値を直接記述することも可能。たとえば次の関数は、与えた引数の和を返す。

```
(a, b) => a + b
```

　なお、アロー関数内ではargumentsやsuper、this、new.targetが定義されず、関数を定義したレキシカル環境のそれぞれをそのまま継承する。

　14.3はメソッド定義についての説明。新たにget/setキーワードが導入されている。メソッド定義の際にメソッド名の前に「get」もしくは「set」を付与することで、getter/setterを定義できる。このメソッドに対しプロパティのように値を代入すると、代入した値を引数として定義したsetter関数が実行される。また、プロパティのように参照すると定義したgetter関数が実行され、その戻り値が返される。なお、getter関数には引数は与えられない。

　14.4は新たに実装されたgenerator関数についての説明。メソッド定義時の際にメソッド名の前に「*」を付与することで定義できる。generator関数では、yieldキーワードを使って関数の途中で実行を中断し、そ時点で指定した値を返すことが可能。yieldもしくはyield*キーワードで中断された関数を再度呼び出すと、その続きから実行が再開される。

　14.5ではclassキーワードなどを使ったクラス定義が説明されている。classキーワードもECMAScript2015の新機能。次のようなスタイルでクラスを定義できる。

```
class クラス名 [extends 継承するクラス名] {
  クラスの定義
}
```

　クラスの定義では、staticキーワードを使ったメソッドの定義が可能。

　14.6では末尾再帰の最適化についての説明。再帰的に実装されているコードをループに展開する流れに書いてある処理系による実装の話なので、JSコードを書く側としてはあまり意識する必要は無いはず。


